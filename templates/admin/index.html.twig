{% extends 'admin-base.html.twig' %}

{% block title %}MX Park | Admin{% endblock %}

{% block body %}
  <div class="container">
    <div class="row">
      <div class="col-9">
        <h1 class="h2 mt-4 mb-4">Prochains Entrainements</h1>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Date</th>
              <th>Nom</th>
              <th>Type</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for event in events %}
              <tr>
                <td>{{ event.date ? event.date|date('d/m/Y H:i:s') : '' }}</td>
                <td>{{ event.name }}</td>
                <td>{{ event.type ? 'Adulte' : 'Kids' }}</td>
                <td>
                  <a class="btn btn-primary btn-sm" href="{{ path('event_show', {'id': event.id}) }}">
                    <i class="fas fa-info-circle"></i>
                  </a>
                  <a class="btn btn-warning btn-sm" href="{{ path('event_edit', {'id': event.id}) }}">
                    <i class="far fa-edit"></i>
                  </a>
                </td>
              </tr>
              <tr>
                <td></td>
                <td>
                  {% if event.type == false %}
                    {% set limit = 15 %}
                  {% else %}
                    {% set limit = 75 %}
                  {% endif %}
                  {% set pourcent = (event.nbusers) / limit * 100 %}

                  <div class="progress">
                    <div class="progress-bar progress-bar-striped {% if event.nbusers >= limit %} bg-danger {% else %} bg-info {% endif %}" role="progressbar" style="width: {{ pourcent }}%" aria-valuenow="{{ event.nbusers }}" aria-valuemin="0" aria-valuemax="100">
                      {% if event.nbusers >= limit %}
                        Complet
                      {% else %}
                        {{ event.nbusers }}
                        inscrits
                      {% endif %}
                    </div>
                  </div>
                </td>
              </tr>
            {% else %}
              <tr>
                <td colspan="4">no records found</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="col-3"></div>
    </div>
  </div>
{% endblock %}
